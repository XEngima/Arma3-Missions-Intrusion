/*
 * Name:	IUnitCounter
 * Date:	2019-03-02
 * Version: 1.0
 * Author:  Engima
 *
 * Description:
 * A class that counts units (players and AI bots) in play.
 */
namespace Intrusion.Server
{
	public class UnitCounter : IUnitCounter
	{
		public constructor("_gameplayConfig" as IGameplayConfig)
		{
			private ["_lobbySlotsCount" as Scalar];
		
			_lobbySlotsCount = 0;
			
			{
				_lobbySlotsCount = _lobbySlotsCount + playableSlotsNumber _x;
			} foreach _gameplayConfig.CompetingSides as Side;
			
			_self.LobbySlotsCount = _lobbySlotsCount;
		};
	
		public method Scalar CountUnitsInPlay()
		{
			count call BIS_fnc_listPlayers
		};
		
		public property Scalar LobbySlotsCount { get; private set; };
	};
};
