/*
 * Name:	BrigadeLeadershipHandler
 * Date:	2019-01-31
 * Version: 1.0
 * Author:  Engima
 *
 * Description:
 * Handles all about brigade leaders.
 */

using Intrusion.Common;
using Intrusion.Communication;

namespace Intrusion.Server
{
	public class BrigadeLeadershipHandler
	{
		// Creates a BrigadeLeadershipHandler object.
		public constructor {
			
		};
		
		// Sets the brigade leadership if it is not already occupied by another player.
		public method TrySetBrigadeLeader("_playerUid" as String, "_side" as Side)
		{
			private ["_playerInfoCollection" as PlayerInfoCollection, "_newLeadershipSet" as Boolean];
		
			_playerInfoCollection = call PublicVariableHandler.GetPlayerInfoCollection;
			
			_newLeadershipSet = [_playerUid, _side] call _playerInfoCollection.TrySetBrigadeLeader;
			
			if (_newLeadershipSet) then {
				["ClientEventReciever.OnNewBrigadeLeader", [_playerUid]] call Remote.Invoke;
			}
			else {
				["ClientEventReciever.OnBrigadeLeaderRejected", [_playerUid]] call Remote.Invoke;
			};
		};
	};
};
