/*
 * Name:	InventedTechnologiesCollection
 * Date:	2018-12-29
 * Version: 1.0
 * Author:  Engima
 *
 * Description:
 * Keeps invented technologies for all sides in the game.
 */

using Intrusion.Common;

namespace Intrusion.Server
{
	public class InventedTechnologiesCollection
	{
		private fields ["_mInventedTechnologies" as Array /* of SideTechnology */];
		
		// Creates a InventedTechnologiesCollection object.
		public constructor {
			_mInventedTechnologies = [];
		};
		
		public method AddInventedTechnology("_side" as Side, "_technology" as Technology)
		{
			_mInventedTechnologies pushBack [_side, _technology] new SideTechnology;
		};
		
		public method Boolean SideTechnologyIsInvented("_side" as Side, "_technology" as Technology)
		{
			scopeName "main";
			
			if (_technology == Technology.None) then {
				true breakOut "main";
			}
			else {
				{
					private ["_sideTech" as SideTechnology];
					_sideTech = _x;
					
					if (_sideTech.Side == _side && _sideTech.Technology == _technology) then {
						true breakOut "main";
					};
				} foreach _mInventedTechnologies as SideTechnology;
			};
			
			false
		};
	};
};
