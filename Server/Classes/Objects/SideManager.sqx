/*
 * Name:    SideHandler
 * Version: 1.0
 * Author:  Engima
 *
 * Description:
 * Manages the resource collection for a side.
 */
namespace Intrusion.Server
{
	public class SideManager
	{
		private fields [
			"_mResourceBook" as ResourceBook,
			"_mResourceCollector" as ResourceCollector,
			"_mProductionManager" as ProductionManager,
			"_mScientist" as Scientist];
		
        // Creates a SideHandler object.
        // Parameter(s):
        // _side (Side): The side to handle.
        public constructor {
		    params ["_side" as Side, "_vehicleSpawner" as IVehicleSpawner];
            
            _self.Side = _side;
            
            _mResourceBook = new ResourceBook;
            _mResourceCollector = [_side, _mResourceBook] new ResourceCollector;
            _mProductionManager = [_side, _vehicleSpawner, _mResourceBook] new ProductionManager;
		};
		
		// Gets the side of the side handler.
		public property Side Side { get; private set; };
		
		// Performs a turn for the side. I.e. collects resources and creates vehicles etc.
		public method PerformTurn {
			call _mResourceCollector.CollectResources;
			//call _mProductionManager.Produce;
			
			//player sideChat str _self.Side + ": " + (call _mResourceBook.ToString);
		};
	};
};
